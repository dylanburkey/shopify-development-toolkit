---
interface Props {
  image?: string;
  imageWidth?: 'small' | 'medium' | 'large';
  layout?: 'image_first' | 'text_first';
  heading?: string;
  text?: string;
  buttonLabel?: string;
  buttonLink?: string;
  contentAlignment?: 'left' | 'center' | 'right';
  colorScheme?: 'background-1' | 'background-2' | 'accent';
}

const {
  image,
  imageWidth = 'medium',
  layout = 'image_first',
  heading = 'Image with text',
  text = 'Pair text with an image to focus on your chosen product, collection, or blog post.',
  buttonLabel,
  buttonLink,
  contentAlignment = 'left',
  colorScheme = 'background-1',
} = Astro.props;

const imageWidthClasses = {
  small: 'md:w-1/3',
  medium: 'md:w-1/2',
  large: 'md:w-2/3',
};

const textWidthClasses = {
  small: 'md:w-2/3',
  medium: 'md:w-1/2',
  large: 'md:w-1/3',
};

const alignmentClasses = {
  left: 'text-left items-start',
  center: 'text-center items-center',
  right: 'text-right items-end',
};

const colorClasses = {
  'background-1': 'bg-white',
  'background-2': 'bg-gray-50',
  'accent': 'bg-emerald-50',
};
---

<section class={`py-12 ${colorClasses[colorScheme]}`}>
  <div class={`container mx-auto px-8 flex flex-col md:flex-row gap-8 ${layout === 'text_first' ? 'md:flex-row-reverse' : ''}`}>
    <div class={`${imageWidthClasses[imageWidth]}`}>
      <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
        {image ? (
          <img src={image} alt="" class="w-full h-full object-cover" />
        ) : (
          <div class="w-full h-full flex items-center justify-center text-gray-300">
            <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
        )}
      </div>
    </div>

    <div class={`${textWidthClasses[imageWidth]} flex flex-col justify-center ${alignmentClasses[contentAlignment]}`}>
      {heading && (
        <h2 class="text-3xl font-bold text-gray-900 mb-4">{heading}</h2>
      )}

      {text && (
        <div class="text-gray-600 mb-6" set:html={text} />
      )}

      {buttonLabel && (
        <a
          href={buttonLink || '#'}
          class="inline-block px-6 py-3 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors"
        >
          {buttonLabel}
        </a>
      )}
    </div>
  </div>
</section>

<!--
  Shopify Liquid Template:

  <section class="image-with-text image-with-text--{{ section.settings.layout }} color-{{ section.settings.color_scheme }}">
    <div class="image-with-text__container">
      <div class="image-with-text__media image-with-text__media--{{ section.settings.image_width }}">
        {%- if section.settings.image -%}
          {{ section.settings.image | image_url: width: 800 | image_tag: loading: 'lazy' }}
        {%- else -%}
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
        {%- endif -%}
      </div>

      <div class="image-with-text__content image-with-text__content--{{ section.settings.content_alignment }}">
        {%- if section.settings.heading != blank -%}
          <h2 class="image-with-text__heading">{{ section.settings.heading }}</h2>
        {%- endif -%}

        {%- if section.settings.text != blank -%}
          <div class="image-with-text__text rte">{{ section.settings.text }}</div>
        {%- endif -%}

        {%- if section.settings.button_label != blank -%}
          <a href="{{ section.settings.button_link }}" class="button button--primary">
            {{ section.settings.button_label }}
          </a>
        {%- endif -%}
      </div>
    </div>
  </section>

  {% schema %}
  {
    "name": "Image with Text",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "select",
        "id": "image_width",
        "label": "Image width",
        "options": [
          { "value": "small", "label": "Small" },
          { "value": "medium", "label": "Medium" },
          { "value": "large", "label": "Large" }
        ],
        "default": "medium"
      },
      {
        "type": "select",
        "id": "layout",
        "label": "Desktop layout",
        "options": [
          { "value": "image_first", "label": "Image first" },
          { "value": "text_first", "label": "Text first" }
        ],
        "default": "image_first"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Image with text"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text",
        "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post.</p>"
      },
      {
        "type": "text",
        "id": "button_label",
        "label": "Button label"
      },
      {
        "type": "url",
        "id": "button_link",
        "label": "Button link"
      },
      {
        "type": "select",
        "id": "content_alignment",
        "label": "Content alignment",
        "options": [
          { "value": "left", "label": "Left" },
          { "value": "center", "label": "Center" },
          { "value": "right", "label": "Right" }
        ],
        "default": "left"
      },
      {
        "type": "select",
        "id": "color_scheme",
        "label": "Color scheme",
        "options": [
          { "value": "background-1", "label": "Background 1" },
          { "value": "background-2", "label": "Background 2" },
          { "value": "accent", "label": "Accent" }
        ],
        "default": "background-1"
      }
    ],
    "presets": [
      {
        "name": "Image with Text"
      }
    ]
  }
  {% endschema %}
-->
